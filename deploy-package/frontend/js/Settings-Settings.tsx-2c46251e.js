import{r as e,j as s,V as a}from"./react-vendor-chunk-d925dc83.js";import{u as r,d as t}from"../assets/index-c53f325e.js";import{s as l}from"./secureStorage-chunk-b945963c.js";import"./editor-chunk-85777d73.js";import"./data-fetching-chunk-60e2cc94.js";const i=()=>{const{theme:i,setTheme:c}=r(),[n,d]=e.useState({emailNotifications:!0,scriptExecutionAlerts:!0,securityAlerts:!0,weeklyDigest:!1}),[o,x]=e.useState({apiKey:"sk-••••••••••••••••••••••••",showApiKey:!1}),[m,h]=e.useState({apiKey:"",showApiKey:!1}),[u,p]=e.useState(!1),[b,g]=e.useState({mode:"real",hasValidKey:!1,serviceHealthy:!1,responseTime:0,canUseRealAI:!1,status:"inactive"}),[y,f]=e.useState(!0),[j,N]=e.useState(!1),[v,w]=e.useState({itemsPerPage:"10",defaultSort:"updated",codeEditorTheme:"vs-dark"}),k=e=>{const{name:s,checked:a}=e.target;d(e=>({...e,[s]:a}))},A=e=>{const{name:s,value:a}=e.target;w(e=>({...e,[s]:a}))},P=async()=>{try{const e=await t.get("/settings/ai-status");g(e.data)}catch(e){console.error("Failed to fetch AI service status:",e),g(e=>({...e,status:"error"}))}finally{f(!1)}};return e.useEffect(()=>{(async()=>{try{const e=await l.getSecure("openai_api_key");e&&h(s=>({...s,apiKey:e}))}catch(e){console.error("Failed to load API key:",e);const s=localStorage.getItem("openai_api_key");s&&h(e=>({...e,apiKey:s}))}})()},[]),e.useEffect(()=>{P();const e=setInterval(P,3e4);return()=>clearInterval(e)},[]),s.jsxs("div",{className:"container mx-auto p-6",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Settings"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-gray-700 rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Appearance"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Theme"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>c("light"),className:"px-4 py-2 rounded-md transition "+("light"===i?"bg-blue-600 text-white":"bg-gray-600 text-gray-300"),children:"Light"}),s.jsx("button",{onClick:()=>c("dark"),className:"px-4 py-2 rounded-md transition "+("dark"===i?"bg-blue-600 text-white":"bg-gray-600 text-gray-300"),children:"Dark"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"itemsPerPage",className:"block text-sm text-gray-400 mb-2",children:"Items Per Page"}),s.jsxs("select",{id:"itemsPerPage",name:"itemsPerPage",value:v.itemsPerPage,onChange:A,className:"bg-gray-800 border border-gray-600 rounded-md px-3 py-2 w-full",children:[s.jsx("option",{value:"5",children:"5"}),s.jsx("option",{value:"10",children:"10"}),s.jsx("option",{value:"25",children:"25"}),s.jsx("option",{value:"50",children:"50"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"defaultSort",className:"block text-sm text-gray-400 mb-2",children:"Default Sort"}),s.jsxs("select",{id:"defaultSort",name:"defaultSort",value:v.defaultSort,onChange:A,className:"bg-gray-800 border border-gray-600 rounded-md px-3 py-2 w-full",children:[s.jsx("option",{value:"updated",children:"Last Updated"}),s.jsx("option",{value:"created",children:"Date Created"}),s.jsx("option",{value:"name",children:"Name"}),s.jsx("option",{value:"quality",children:"Quality Score"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"codeEditorTheme",className:"block text-sm text-gray-400 mb-2",children:"Code Editor Theme"}),s.jsxs("select",{id:"codeEditorTheme",name:"codeEditorTheme",value:v.codeEditorTheme,onChange:A,className:"bg-gray-800 border border-gray-600 rounded-md px-3 py-2 w-full",children:[s.jsx("option",{value:"vs-dark",children:"Dark (VS Code)"}),s.jsx("option",{value:"vs-light",children:"Light (VS Code)"}),s.jsx("option",{value:"hc-black",children:"High Contrast"})]})]})]})]}),s.jsxs("div",{className:"bg-gray-700 rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Notifications"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{htmlFor:"emailNotifications",className:"text-gray-300",children:"Email Notifications"}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",id:"emailNotifications",name:"emailNotifications",className:"sr-only peer",checked:n.emailNotifications,onChange:k}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{htmlFor:"scriptExecutionAlerts",className:"text-gray-300",children:"Script Execution Alerts"}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",id:"scriptExecutionAlerts",name:"scriptExecutionAlerts",className:"sr-only peer",checked:n.scriptExecutionAlerts,onChange:k}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{htmlFor:"securityAlerts",className:"text-gray-300",children:"Security Alerts"}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",id:"securityAlerts",name:"securityAlerts",className:"sr-only peer",checked:n.securityAlerts,onChange:k}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{htmlFor:"weeklyDigest",className:"text-gray-300",children:"Weekly Digest"}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",id:"weeklyDigest",name:"weeklyDigest",className:"sr-only peer",checked:n.weeklyDigest,onChange:k}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),s.jsxs("div",{className:"bg-gray-700 rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"API Settings"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"API Key"}),s.jsxs("div",{className:"flex",children:[s.jsx("input",{type:o.showApiKey?"text":"password",value:o.apiKey,readOnly:!0,className:"bg-gray-800 border border-gray-600 rounded-l-md px-3 py-2 w-full"}),s.jsx("button",{onClick:()=>{x(e=>({...e,showApiKey:!e.showApiKey}))},className:"bg-gray-600 text-gray-300 px-3 py-2 rounded-r-md hover:bg-gray-500 transition",children:o.showApiKey?"Hide":"Show"})]})]}),s.jsx("button",{onClick:()=>{const e="sk-"+Math.random().toString(36).substring(2,15);x(s=>({...s,apiKey:e}))},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition w-full",children:"Regenerate API Key"}),s.jsxs("div",{className:"mt-4 p-4 bg-gray-800 rounded-md text-sm",children:[s.jsx("p",{className:"text-gray-400 mb-2",children:"API Usage This Month:"}),s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{className:"text-gray-300",children:"Script Analysis"}),s.jsx("span",{className:"text-gray-300",children:"245 / 1000"})]}),s.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2.5 mb-4",children:s.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:"24.5%"}})}),s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{className:"text-gray-300",children:"Script Executions"}),s.jsx("span",{className:"text-gray-300",children:"87 / 500"})]}),s.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2.5",children:s.jsx("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:"17.4%"}})})]})]})]})]}),s.jsxs("div",{className:"mt-6 bg-gray-700 rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"OpenAI API Configuration"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"OpenAI API Key"}),s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Enter your OpenAI API key to enable AI-powered script analysis"}),s.jsxs("div",{className:"flex",children:[s.jsx("input",{type:m.showApiKey?"text":"password",value:m.apiKey,onChange:e=>{const s=e.target.value;h(e=>({...e,apiKey:s}))},placeholder:"sk-...",className:"bg-gray-800 border border-gray-600 rounded-l-md px-3 py-2 w-full"}),s.jsx("button",{onClick:()=>{h(e=>({...e,showApiKey:!e.showApiKey}))},className:"bg-gray-600 text-gray-300 px-3 py-2 hover:bg-gray-500 transition",children:m.showApiKey?"Hide":"Show"}),s.jsx("button",{onClick:async()=>{p(!0);try{await l.setSecure("openai_api_key",m.apiKey),a.success("OpenAI API key saved securely!"),P()}catch(e){a.error("Failed to save API key")}finally{p(!1)}},className:"bg-green-600 text-white px-4 py-2 rounded-r-md hover:bg-green-700 transition",children:"Save"})]})]}),s.jsx("div",{className:"p-4 bg-blue-900 bg-opacity-30 border border-blue-700 rounded-md",children:s.jsxs("p",{className:"text-blue-400 text-sm",children:[s.jsx("strong",{children:"Note:"})," Your API key is stored locally in your browser and sent securely to the backend for AI analysis. Get your API key from ",s.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"OpenAI Platform"}),"."]})}),s.jsxs("div",{className:"mt-4 p-4 bg-gray-800 rounded-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("p",{className:"text-gray-400",children:"AI Service Status:"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 rounded-full mr-2 animate-pulse "+(y?"bg-yellow-500":"active"===b.status?"bg-green-500":"mock"===b.status?"bg-blue-500":"bg-red-500")}),s.jsx("span",{className:"text-sm text-gray-300",children:y?"Checking...":"active"===b.status?"AI Service Active":"mock"===b.status?"Mock Mode":"Service Error"})]})]}),s.jsxs("div",{className:"space-y-2 text-xs text-gray-400",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Mode:"}),s.jsx("span",{className:"text-gray-300",children:"real"===b.mode?"Real AI":"Mock AI"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"API Key:"}),s.jsx("span",{className:"text-gray-300 "+(b.hasValidKey?"text-green-400":"text-red-400"),children:b.hasValidKey?"Valid":"Not configured"})]}),"real"===b.mode&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Response Time:"}),s.jsxs("span",{className:"text-gray-300",children:[b.responseTime,"ms"]})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[s.jsxs("label",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-300",children:"Use Real AI Service"}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer",checked:"real"===b.mode,onChange:e=>{j||(async e=>{if("real"!==e||m.apiKey){N(!0);try{const s=await t.post("/settings/ai-mode",{mode:e});s.data.success&&(g(e=>({...e,mode:s.data.mode,status:"mock"===s.data.mode?"mock":"active"})),a.success(s.data.message),setTimeout(()=>{P()},1e3))}catch(s){a.error(s.response?.data?.error||"Failed to toggle AI mode")}finally{N(!1)}}else a.error("Please enter an OpenAI API key first")})(e.target.checked?"real":"mock")},disabled:j||!b.canUseRealAI&&"mock"===b.mode}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600 peer-disabled:opacity-50"})]})]}),!b.canUseRealAI&&"mock"===b.mode&&s.jsx("p",{className:"text-xs text-yellow-400 mt-2",children:b.hasValidKey?b.serviceHealthy?"Cannot enable real AI mode":"AI service is currently unavailable":"Add a valid API key to enable real AI"})]})]})]})]}),s.jsxs("div",{className:"mt-6 bg-gray-700 rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Account Security"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Change Password"}),s.jsxs("form",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"currentPassword",className:"block text-sm text-gray-400 mb-1",children:"Current Password"}),s.jsx("input",{type:"password",id:"currentPassword",className:"w-full bg-gray-800 border border-gray-600 rounded-md px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newPassword",className:"block text-sm text-gray-400 mb-1",children:"New Password"}),s.jsx("input",{type:"password",id:"newPassword",className:"w-full bg-gray-800 border border-gray-600 rounded-md px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm text-gray-400 mb-1",children:"Confirm New Password"}),s.jsx("input",{type:"password",id:"confirmPassword",className:"w-full bg-gray-800 border border-gray-600 rounded-md px-3 py-2"})]}),s.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition",children:"Update Password"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Two-Factor Authentication"}),s.jsx("p",{className:"text-gray-400 mb-4",children:"Enhance your account security by enabling two-factor authentication."}),s.jsx("div",{className:"p-4 bg-yellow-900 bg-opacity-30 border border-yellow-700 rounded-md mb-4",children:s.jsx("p",{className:"text-yellow-500",children:"Two-factor authentication is currently disabled."})}),s.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition",children:"Enable 2FA"})]})]})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition",children:"Save All Settings"})})]})};export{i as default};
