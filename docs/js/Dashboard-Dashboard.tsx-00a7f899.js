import{j as e,L as t,r}from"./react-vendor-chunk-814f15fe.js";import{u as s}from"./data-fetching-chunk-acdfbf86.js";import{s as a,a as n,L as o,u as i,c as l}from"../assets/index-c161c383.js";import{formatDistanceToNow as c}from"./date-utils-index.js-5ebf14a0.js";import{C as d}from"./visualization-chunk-77209cec.js";import"./editor-chunk-85777d73.js";const u={...a,getScriptsByCategory:async e=>{try{return(await a.getScripts({category_id:e})).scripts||[]}catch(t){return console.error(`Error fetching scripts for category ${e}:`,t),[]}},getRecentScripts:async(e=10)=>{try{return(await a.getScripts({sort:"created_at",order:"desc",limit:e})).scripts||[]}catch(t){return console.error("Error fetching recent scripts:",t),[]}},getPopularScripts:async(e=10)=>{try{return(await a.getScripts({sort:"views",order:"desc",limit:e})).scripts||[]}catch(t){return console.error("Error fetching popular scripts:",t),[]}},getDashboardStats:async()=>{try{const e=await fetch(`${{NODE_ENV:'"production"'}.REACT_APP_API_URL||"http://localhost:4000"}/api/analytics/dashboard-stats`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();return{totalScripts:t.totalScripts||0,scriptsChange:t.scriptsChange||0,totalCategories:t.totalCategories||0,avgSecurityScore:t.avgSecurityScore||0,securityScoreChange:t.securityScoreChange||0,totalAnalyses:t.totalAnalyses||0,analysesChange:t.analysesChange||0}}catch(e){return console.error("Error fetching dashboard stats:",e),{totalScripts:0,scriptsChange:0,totalCategories:0,avgSecurityScore:0,securityScoreChange:0,totalAnalyses:0,analysesChange:0}}},getRecentActivity:async(e=10)=>{try{try{const t=await n.getUsageStats();if(t.recentActivity&&Array.isArray(t.recentActivity))return t.recentActivity.slice(0,e)}catch(t){console.warn("Failed to get activity from analytics service:",t)}return Array(e).fill(0).map((e,t)=>({id:`activity-${t}`,type:["create","update","execute","analyze"][Math.floor(4*Math.random())],script_id:`script-${t}`,script_title:`Example Script ${t}`,user_id:"user-1",username:"User",timestamp:new Date(Date.now()-36e5*t).toISOString(),details:{}}))}catch(r){return console.error("Error fetching recent activity:",r),[]}},getScriptTrends:async(e="week")=>{try{const t=new Date,r={uploads:[],executions:[],analyses:[]};let s=7;"month"===e&&(s=30),"year"===e&&(s=12);for(let a=0;a<s;a++){const n=new Date;"year"===e?(n.setMonth(t.getMonth()-(s-a-1)),n.setDate(1)):n.setDate(t.getDate()-(s-a-1));const o=n.toISOString().split("T")[0],i=.5+a/s*.5,l=Math.floor(10*Math.random()*i)+1,c=Math.floor(20*Math.random()*i)+2,d=Math.floor(15*Math.random()*i)+1;r.uploads.push({date:o,count:l}),r.executions.push({date:o,count:c}),r.analyses.push({date:o,count:d})}return r}catch(t){return console.error(`Error fetching script trends for ${e}:`,t),{uploads:[],executions:[],analyses:[]}}}},g={...n,getSecurityMetrics:async()=>{try{const e=await n.getSecurityMetrics();return{securityScores:[{score:8,count:e.highSecurityCount||0,percentage:e.highSecurityPercentage||0},{score:5,count:e.mediumSecurityCount||0,percentage:e.mediumSecurityPercentage||0},{score:2,count:e.lowSecurityCount||0,percentage:e.lowSecurityPercentage||0}],commonIssues:e.commonIssues||[],averageScore:(8*e.highSecurityCount+5*e.mediumSecurityCount+2*e.lowSecurityCount)/(e.highSecurityCount+e.mediumSecurityCount+e.lowSecurityCount)||0,totalScripts:e.highSecurityCount+e.mediumSecurityCount+e.lowSecurityCount||0}}catch(e){return console.error("Error fetching security metrics:",e),{securityScores:[{score:8,count:0,percentage:0},{score:5,count:0,percentage:0},{score:2,count:0,percentage:0}],commonIssues:[],averageScore:0,totalScripts:0}}}},h=({script:r,theme:s,showActions:a=!0,onExecute:n,onAnalyze:o})=>{let i="Unknown date";try{const e=r.updated_at||r.created_at;if(e){const t=new Date(e);isNaN(t.getTime())||(i=c(t,{addSuffix:!0}))}}catch(u){console.warn("Error formatting date:",u)}const l=e=>void 0===e?"dark"===s?"text-gray-400":"text-gray-500":e>=8?"text-green-500":e>=5?"text-yellow-500":"text-red-500",d=e=>void 0===e?"dark"===s?"text-gray-400":"text-gray-500":e>=8?"text-blue-500":e>=5?"text-blue-400":"text-blue-300";return e.jsx(t,{to:`/scripts/${r.id}`,className:"block rounded-lg overflow-hidden shadow-md transition-transform transform hover:scale-105 "+("dark"===s?"bg-gray-800 hover:bg-gray-750":"bg-white hover:bg-gray-50"),children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold truncate",children:r.title}),e.jsx("div",{className:"flex items-center",children:r.is_public?e.jsx("span",{className:"text-xs px-2 py-1 rounded "+("dark"===s?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-800"),children:"Public"}):e.jsx("span",{className:"text-xs px-2 py-1 rounded "+("dark"===s?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"),children:"Private"})})]}),e.jsx("p",{className:"text-sm mb-3 line-clamp-2 "+("dark"===s?"text-gray-300":"text-gray-600"),children:r.description||"No description provided."}),r.tags&&r.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[r.tags.slice(0,3).map((t,r)=>e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full "+("dark"===s?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"),children:t},r)),r.tags.length>3&&e.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full "+("dark"===s?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"),children:["+",r.tags.length-3]})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsxs("div",{className:"dark"===s?"text-gray-400":"text-gray-500",children:[r.category_name&&e.jsx("span",{className:"mr-2",children:r.category_name}),e.jsx("span",{children:i})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[void 0!==r.security_score&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 ${l(r.security_score)}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),e.jsx("span",{className:`ml-1 ${l(r.security_score)}`,children:r.security_score.toFixed(1)})]}),void 0!==r.quality_score&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 ${d(r.quality_score)}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:`ml-1 ${d(r.quality_score)}`,children:r.quality_score.toFixed(1)})]}),void 0!==r.views&&e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 "+("dark"===s?"text-gray-400":"text-gray-500"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.jsx("span",{className:"ml-1 "+("dark"===s?"text-gray-400":"text-gray-500"),children:r.views})]})]})]}),a&&e.jsxs("div",{className:"mt-3 flex justify-end space-x-2",children:[n&&e.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),n&&n(r.id)},className:"text-xs px-2 py-1 rounded "+("dark"===s?"bg-green-900 text-green-300 hover:bg-green-800":"bg-green-100 text-green-800 hover:bg-green-200"),children:"Execute"}),o&&e.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),o&&o(r.id)},className:"text-xs px-2 py-1 rounded "+("dark"===s?"bg-blue-900 text-blue-300 hover:bg-blue-800":"bg-blue-100 text-blue-800 hover:bg-blue-200"),children:"Analyze"})]})]})})},x=({data:t,theme:s})=>{const a=r.useRef(null),n=r.useRef(null);return r.useEffect(()=>{if(!a.current)return;const e=t.filter(e=>void 0!==e.count&&e.count>0),r=e.map(e=>e.name),o=e.map(e=>e.count||0),i=e.map(e=>e.color||""),l=i.some(e=>e)?i.map(e=>e||"#4299E1"):(e=>{const t=["#4299E1","#48BB78","#ED8936","#9F7AEA","#F56565","#38B2AC","#ED64A6","#ECC94B","#667EEA","#FC8181"];if(e<=t.length)return t.slice(0,e);const r=[...t];for(let s=t.length;s<e;s++)r.push(t[s%t.length]);return r})(e.length);n.current&&n.current.destroy();const c=a.current.getContext("2d");return c&&(n.current=new d(c,{type:"doughnut",data:{labels:r,datasets:[{data:o,backgroundColor:l,borderColor:"dark"===s?"#1A202C":"#FFFFFF",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"dark"===s?"#E2E8F0":"#2D3748",padding:10,usePointStyle:!0,font:{size:11}}},tooltip:{backgroundColor:"dark"===s?"#4A5568":"#FFFFFF",titleColor:"dark"===s?"#FFFFFF":"#1A202C",bodyColor:"dark"===s?"#E2E8F0":"#4A5568",borderColor:"dark"===s?"#2D3748":"#E2E8F0",borderWidth:1,padding:10,displayColors:!0,callbacks:{label:e=>{const t=e.label||"",r=e.raw,s=e.dataset.data.reduce((e,t)=>e+t,0);return`${t}: ${r} (${Math.round(r/s*100)}%)`}}}},cutout:"60%",animation:{animateScale:!0,animateRotate:!0}}})),()=>{n.current&&n.current.destroy()}},[t,s]),e.jsx("div",{className:"w-full h-full",children:0===t.length?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-sm "+("dark"===s?"text-gray-400":"text-gray-500"),children:"No category data available"})}):e.jsx("canvas",{ref:a})})},m=({data:t,theme:s})=>{const a=r.useRef(null),n=r.useRef(null),o=e=>e>=8?"#48BB78":e>=6?"#4299E1":e>=4?"#ECC94B":e>=2?"#ED8936":"#F56565";r.useEffect(()=>{if(!a.current||!t||0===t.length)return;const e=t.map(e=>`Score ${e.score}`),r=t.map(e=>e.count),i=t.map(e=>o(e.score));n.current&&n.current.destroy();const l=a.current.getContext("2d");return l&&(n.current=new d(l,{type:"bar",data:{labels:e,datasets:[{label:"Scripts",data:r,backgroundColor:i,borderColor:"dark"===s?"#1A202C":"#FFFFFF",borderWidth:1,borderRadius:4,barPercentage:.6,categoryPercentage:.8}]},options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1},tooltip:{backgroundColor:"dark"===s?"#4A5568":"#FFFFFF",titleColor:"dark"===s?"#FFFFFF":"#1A202C",bodyColor:"dark"===s?"#E2E8F0":"#4A5568",borderColor:"dark"===s?"#2D3748":"#E2E8F0",borderWidth:1,padding:10,displayColors:!0,callbacks:{label:e=>{const r=e.dataIndex,s=t[r];return`${s.count} scripts (${s.percentage}%)`}}}},scales:{x:{beginAtZero:!0,grid:{color:"dark"===s?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:"dark"===s?"#CBD5E0":"#4A5568",font:{size:10},precision:0}},y:{grid:{display:!1},ticks:{color:"dark"===s?"#CBD5E0":"#4A5568",font:{size:10}}}}}})),()=>{n.current&&n.current.destroy()}},[t,s]);const i=(e=>{if(!e||0===e.length)return 0;const t=e.reduce((e,t)=>e+t.count,0);if(0===t)return 0;const r=e.reduce((e,t)=>e+t.score*t.count,0);return Math.round(r/t*10)/10})(t),l=o(i);return e.jsx("div",{className:"w-full h-full",children:t&&0!==t.length?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Overall Score"}),e.jsxs("div",{className:"text-2xl font-bold",style:{color:l},children:[i,"/10"]})]})}),e.jsx("canvas",{ref:a})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-sm "+("dark"===s?"text-gray-400":"text-gray-500"),children:"No security data available"})})})},p=({data:t,theme:s,period:a})=>{const n=r.useRef(null),o=r.useRef(null);return r.useEffect(()=>{if(!n.current||!t)return;const e=t.uploads.map(e=>(e=>{const t=new Date(e);return"year"===a?t.toLocaleDateString("en-US",{month:"short"}):"month"===a?t.toLocaleDateString("en-US",{day:"numeric",month:"short"}):t.toLocaleDateString("en-US",{weekday:"short"})})(e.date));o.current&&o.current.destroy();const r=n.current.getContext("2d");return r&&(o.current=new d(r,{type:"line",data:{labels:e,datasets:[{label:"Uploads",data:t.uploads.map(e=>e.count),borderColor:"#4299E1",backgroundColor:"rgba(66, 153, 225, 0.1)",borderWidth:2,tension:.3,pointRadius:3,pointBackgroundColor:"#4299E1",fill:!0},{label:"Executions",data:t.executions.map(e=>e.count),borderColor:"#48BB78",backgroundColor:"rgba(72, 187, 120, 0.1)",borderWidth:2,tension:.3,pointRadius:3,pointBackgroundColor:"#48BB78",fill:!0},{label:"Analyses",data:t.analyses.map(e=>e.count),borderColor:"#9F7AEA",backgroundColor:"rgba(159, 122, 234, 0.1)",borderWidth:2,tension:.3,pointRadius:3,pointBackgroundColor:"#9F7AEA",fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"dark"===s?"#CBD5E0":"#4A5568",padding:10,usePointStyle:!0,pointStyle:"circle"}},tooltip:{backgroundColor:"dark"===s?"#4A5568":"#FFFFFF",titleColor:"dark"===s?"#FFFFFF":"#1A202C",bodyColor:"dark"===s?"#E2E8F0":"#4A5568",borderColor:"dark"===s?"#2D3748":"#E2E8F0",borderWidth:1,padding:10,displayColors:!0,callbacks:{title:e=>{const r=e[0].dataIndex;return t.uploads[r]?.date||""}}}},scales:{x:{grid:{color:"dark"===s?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:"dark"===s?"#CBD5E0":"#4A5568",font:{size:10}}},y:{beginAtZero:!0,grid:{color:"dark"===s?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:"dark"===s?"#CBD5E0":"#4A5568",font:{size:10},precision:0}}}}})),()=>{o.current&&o.current.destroy()}},[t,s,a]),e.jsx("div",{className:"w-full h-full",children:!t||0===t.uploads.length&&0===t.executions.length&&0===t.analyses.length?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-sm "+("dark"===s?"text-gray-400":"text-gray-500"),children:"No trend data available"})}):e.jsx("canvas",{ref:n})})},y=({activities:t,theme:r})=>{const s=e=>{const t=new Date(e),r=(new Date).getTime()-t.getTime(),s=Math.floor(r/1e3),a=Math.floor(s/60),n=Math.floor(a/60),o=Math.floor(n/24);return o>0?1===o?"yesterday":`${o} days ago`:n>0?1===n?"1 hour ago":`${n} hours ago`:a>0?1===a?"1 minute ago":`${a} minutes ago`:"just now"},a=t=>{switch(t){case"create":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})});case"update":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})});case"execute":return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]});case"analyze":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})});case"delete":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})});default:return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},n=e=>{const t=e.script_title||"a script";switch(e.type){case"create":return`created ${t}`;case"update":return`updated ${t}`;case"execute":return`executed ${t}`;case"analyze":return`analyzed ${t}`;case"delete":return`deleted ${t}`;default:return`interacted with ${t}`}};return e.jsx("div",{className:"space-y-4 "+(0===t.length?"flex justify-center items-center h-40":""),children:0===t.length?e.jsx("p",{className:"text-sm "+("dark"===r?"text-gray-400":"text-gray-500"),children:"No recent activity"}):t.map(t=>e.jsxs("div",{className:`flex items-start space-x-3 p-3 rounded-lg ${"dark"===r?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} transition-colors duration-150`,children:[e.jsx("div",{className:"p-2 rounded-full "+("dark"===r?"bg-gray-600":"bg-white"),children:a(t.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"font-medium truncate",children:t.username}),e.jsx("span",{className:"text-xs "+("dark"===r?"text-gray-400":"text-gray-500"),children:s(t.timestamp)})]}),e.jsx("p",{className:"text-sm "+("dark"===r?"text-gray-300":"text-gray-600"),children:n(t)}),t.details&&t.details.message&&e.jsx("p",{className:"text-xs mt-1 "+("dark"===r?"text-gray-400":"text-gray-500"),children:t.details.message})]})]},t.id))})},b=({title:t,value:r,icon:s,suffix:a="",change:n,isLoading:i=!1})=>e.jsxs("div",{className:"p-6 rounded-lg shadow-md bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-3 rounded-full ${(()=>{switch(s){case"script":return"bg-blue-100 dark:bg-blue-900";case"category":return"bg-purple-100 dark:bg-purple-900";case"security":return"bg-green-100 dark:bg-green-900";case"analysis":return"bg-orange-100 dark:bg-orange-900";case"user":return"bg-indigo-100 dark:bg-indigo-900";case"execution":return"bg-yellow-100 dark:bg-yellow-900";default:return"bg-gray-100 dark:bg-gray-800"}})()}`,children:e.jsx("div",{className:(()=>{switch(s){case"script":return"text-blue-500";case"category":return"text-purple-500";case"security":return"text-green-500";case"analysis":return"text-orange-500";case"user":return"text-indigo-500";case"execution":return"text-yellow-500";default:return"text-gray-500"}})(),children:(()=>{switch(s){case"script":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})});case"category":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})});case"security":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})});case"analysis":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})});case"user":return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})});case"execution":return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]});default:return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}})()})}),e.jsx("h3",{className:"ml-3 text-lg font-medium text-gray-700 dark:text-gray-300",children:t})]}),void 0!==n&&e.jsxs("div",{className:"flex items-center "+(n?n>0?"text-green-500":"text-red-500":"text-gray-500"),children:[n?n>0?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):null,e.jsxs("span",{className:"ml-1 text-sm",children:[Math.abs(n),"%"]})]})]}),i?e.jsx("div",{className:"flex justify-center py-2",children:e.jsx(o,{size:"small"})}):e.jsxs("div",{className:"flex items-baseline",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:r}),a&&e.jsx("span",{className:"ml-1 text-lg text-gray-500 dark:text-gray-400",children:a})]})]}),v=()=>{const{theme:a}=i(),[n,c]=r.useState(null),[d,v]=r.useState("week"),{data:j,isLoading:w,error:k}=s({queryKey:["scripts",n],queryFn:()=>n?u.getScriptsByCategory(n):u.getRecentScripts(8),staleTime:6e4}),{data:f,isLoading:N}=s({queryKey:["categories"],queryFn:()=>l.getCategories(),staleTime:3e5}),{data:C,isLoading:S}=s({queryKey:["dashboard-stats"],queryFn:()=>u.getDashboardStats(),staleTime:3e5}),{data:F,isLoading:A}=s({queryKey:["recent-activity"],queryFn:()=>u.getRecentActivity(),staleTime:6e4}),{data:L,isLoading:M}=s({queryKey:["security-metrics"],queryFn:()=>g.getSecurityMetrics(),staleTime:3e5}),{data:E,isLoading:B,refetch:z}=s({queryKey:["script-trends",d],queryFn:()=>u.getScriptTrends(d),staleTime:3e5});return e.jsxs("div",{className:""+("dark"===a?"text-white":"text-gray-800"),children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Welcome to PSScript"}),e.jsx("p",{className:"text-lg opacity-75",children:"AI-powered PowerShell script management and analysis platform"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(b,{title:"Total Scripts",value:C?.totalScripts||0,icon:"script",change:C?.scriptsChange||0,isLoading:S}),e.jsx(b,{title:"Categories",value:C?.totalCategories||0,icon:"category",isLoading:S}),e.jsx(b,{title:"Avg. Security Score",value:C?.avgSecurityScore?.toFixed(1)||"0.0",icon:"security",suffix:"/10",change:C?.securityScoreChange||0,isLoading:S}),e.jsx(b,{title:"AI Analyses",value:C?.totalAnalyses||0,icon:"analysis",change:C?.analysesChange||0,isLoading:S})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"p-6 rounded-lg shadow-md mb-6 "+("dark"===a?"bg-gray-800":"bg-white"),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Recent Scripts"}),e.jsx(t,{to:"/scripts",className:"text-sm px-3 py-1 rounded "+("dark"===a?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-100 hover:bg-blue-200 text-blue-800"),children:"View All"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("button",{onClick:()=>c(null),className:"px-3 py-1 text-sm rounded-full "+(null===n?"dark"===a?"bg-blue-600 text-white":"bg-blue-500 text-white":"dark"===a?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"),children:"All"}),f?.categories?.map(t=>e.jsx("button",{onClick:()=>c(t.id),className:"px-3 py-1 text-sm rounded-full "+(n===t.id?"dark"===a?"bg-blue-600 text-white":"bg-blue-500 text-white":"dark"===a?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"),children:t.name},t.id))]}),w?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(o,{size:"lg"})}):k?e.jsx("div",{className:"text-center py-8 text-red-500",children:"Error loading scripts. Please try again."}):0===j?.length?e.jsxs("div",{className:"text-center py-8 opacity-70",children:[n?"No scripts found in this category.":"No scripts found. Create your first script!",e.jsx("div",{className:"mt-4",children:e.jsx(t,{to:"/chat",className:"inline-block px-4 py-2 rounded "+("dark"===a?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-500 hover:bg-blue-400 text-white"),children:"Create with AI"})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j?.map(t=>e.jsx(h,{script:t,theme:a},t.id))})]}),e.jsxs("div",{className:"p-6 rounded-lg shadow-md mb-6 "+("dark"===a?"bg-gray-800":"bg-white"),children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Security Metrics"}),M?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(o,{size:"lg"})}):e.jsx("div",{className:"h-64",children:e.jsx(m,{data:L?.securityScores||[],theme:a})})]}),e.jsxs("div",{className:"p-6 rounded-lg shadow-md "+("dark"===a?"bg-gray-800":"bg-white"),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Script Activity Trends"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>v("week"),className:"px-2 py-1 text-xs rounded "+("week"===d?"dark"===a?"bg-blue-600 text-white":"bg-blue-500 text-white":"dark"===a?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300"),children:"Week"}),e.jsx("button",{onClick:()=>v("month"),className:"px-2 py-1 text-xs rounded "+("month"===d?"dark"===a?"bg-blue-600 text-white":"bg-blue-500 text-white":"dark"===a?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300"),children:"Month"}),e.jsx("button",{onClick:()=>v("year"),className:"px-2 py-1 text-xs rounded "+("year"===d?"dark"===a?"bg-blue-600 text-white":"bg-blue-500 text-white":"dark"===a?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300"),children:"Year"})]})]}),B?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(o,{size:"lg"})}):e.jsx("div",{className:"h-64",children:e.jsx(p,{data:E||{uploads:[],executions:[],analyses:[]},theme:a,period:d})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"p-6 rounded-lg shadow-md mb-6 "+("dark"===a?"bg-gray-800":"bg-white"),children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Script Categories"}),N?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(o,{size:"lg"})}):e.jsx("div",{className:"h-64",children:e.jsx(x,{data:f?.categories||[],theme:a})})]}),e.jsxs("div",{className:"p-6 rounded-lg shadow-md "+("dark"===a?"bg-gray-800":"bg-white"),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Recent Activity"}),e.jsx(t,{to:"/scripts",className:"text-sm px-3 py-1 rounded "+("dark"===a?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-100 hover:bg-blue-200 text-blue-800"),children:"View All"})]}),A?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(o,{size:"lg"})}):e.jsx(y,{activities:F||[],theme:a})]})]})]}),e.jsxs("div",{className:"mt-8 p-6 rounded-lg shadow-md "+("dark"===a?"bg-gray-800":"bg-white"),children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(t,{to:"/chat",className:"p-4 rounded-lg flex flex-col items-center text-center transition-transform transform hover:scale-105 "+("dark"===a?"bg-blue-900 hover:bg-blue-800":"bg-blue-100 hover:bg-blue-200"),children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-2 "+("dark"===a?"bg-blue-800":"bg-blue-200"),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),e.jsx("h3",{className:"font-medium",children:"Chat with AI"}),e.jsx("p",{className:"text-sm opacity-75 mt-1",children:"Get help with PowerShell scripts"})]}),e.jsxs(t,{to:"/scripts",className:"p-4 rounded-lg flex flex-col items-center text-center transition-transform transform hover:scale-105 "+("dark"===a?"bg-green-900 hover:bg-green-800":"bg-green-100 hover:bg-green-200"),children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-2 "+("dark"===a?"bg-green-800":"bg-green-200"),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"font-medium",children:"Manage Scripts"}),e.jsx("p",{className:"text-sm opacity-75 mt-1",children:"Browse and organize your scripts"})]}),e.jsxs(t,{to:"/documentation",className:"p-4 rounded-lg flex flex-col items-center text-center transition-transform transform hover:scale-105 "+("dark"===a?"bg-purple-900 hover:bg-purple-800":"bg-purple-100 hover:bg-purple-200"),children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-2 "+("dark"===a?"bg-purple-800":"bg-purple-200"),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),e.jsx("h3",{className:"font-medium",children:"Documentation"}),e.jsx("p",{className:"text-sm opacity-75 mt-1",children:"PowerShell reference and guides"})]}),e.jsxs(t,{to:"/settings",className:"p-4 rounded-lg flex flex-col items-center text-center transition-transform transform hover:scale-105 "+("dark"===a?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300"),children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-2 "+("dark"===a?"bg-gray-600":"bg-gray-300"),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("h3",{className:"font-medium",children:"Settings"})," ",e.jsx("p",{className:"text-sm opacity-75 mt-1",children:"Configure your account"})," "]})]})]})]})};export{v as default};
