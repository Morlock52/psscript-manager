import{r as e,j as r,b as a,L as s,o as t}from"./react-vendor-chunk-814f15fe.js";import{A as o,d}from"../assets/index-c161c383.js";import"./editor-chunk-85777d73.js";import"./data-fetching-chunk-acdfbf86.js";const n=()=>{const{user:n,login:i}=e.useContext(o),[l,c]=e.useState({username:"",email:"",password:"",confirmPassword:""}),[m,u]=e.useState(!1);if(n)return r.jsx(a,{to:"/",replace:!0});const g=e=>{const{name:r,value:a}=e.target;c(e=>({...e,[r]:a}))};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{children:[r.jsx("img",{className:"mx-auto h-12 w-auto",src:"/dave_pss.png",alt:"PSScript"}),r.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900 dark:text-white",children:"Create your account"}),r.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:["Or"," ",r.jsx(s,{to:"/login",className:"font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400",children:"sign in to your existing account"})]})]}),r.jsxs("form",{className:"mt-8 space-y-6",onSubmit:async e=>{if(e.preventDefault(),l.password!==l.confirmPassword?(t.error("Passwords do not match"),0):!(l.password.length<8&&(t.error("Password must be at least 8 characters long"),1))){u(!0);try{const e=await d.post("/api/auth/legacy/register",{username:l.username,email:l.email,password:l.password}),{token:r,user:a}=e.data;i(r,a),t.success("Account created successfully!")}catch(r){const e=r.response?.data?.message||"Registration failed. Please try again.";t.error(e)}finally{u(!1)}}},children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Username"}),r.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-800 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Username",value:l.username,onChange:g})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email address"}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-800 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Email address",value:l.email,onChange:g})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),r.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,minLength:8,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-800 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Password (min. 8 characters)",value:l.password,onChange:g})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirm Password"}),r.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-800 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Confirm password",value:l.confirmPassword,onChange:g})]})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:m,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Creating account...":"Create account"})})]})]})})};export{n as default};
