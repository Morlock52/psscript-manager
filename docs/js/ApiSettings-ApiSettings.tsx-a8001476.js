import{r as e,j as a,T as s,p as r,aC as t,aD as n,D as o,t as l,a3 as i,a4 as c,a5 as p,Z as h,q as E,U as d}from"./react-vendor-chunk-814f15fe.js";import{u as _}from"../assets/index-c161c383.js";import"./editor-chunk-85777d73.js";import"./data-fetching-chunk-acdfbf86.js";const m=()=>{_();const[m,I]=e.useState(!1),[y,v]=e.useState(""),[A,u]=e.useState(!0),[P,x]=e.useState([{name:"openai_api_key",key:"",description:"OpenAI API Key for ChatGPT and other AI services",placeholder:"sk-...",url:"https://platform.openai.com/account/api-keys",envKey:"VITE_OPENAI_API_KEY",hasEnvValue:!!{}.VITE_OPENAI_API_KEY},{name:"google_api_key",key:"",description:"Google API Key for search and other Google services",placeholder:"AIza...",url:"https://console.cloud.google.com/apis/credentials",envKey:"VITE_GOOGLE_API_KEY",hasEnvValue:!!{}.VITE_GOOGLE_API_KEY},{name:"weather_api_key",key:"",description:"OpenWeather API Key for weather data",placeholder:"1a2b3c...",url:"https://home.openweathermap.org/api_keys",envKey:"VITE_WEATHER_API_KEY",hasEnvValue:!!{}.VITE_WEATHER_API_KEY},{name:"alpha_vantage_api_key",key:"",description:"Alpha Vantage API Key for financial data",placeholder:"ABC123...",url:"https://www.alphavantage.co/support/#api-key",envKey:"VITE_ALPHA_VANTAGE_API_KEY",hasEnvValue:!!{}.VITE_ALPHA_VANTAGE_API_KEY}]);e.useEffect(()=>{(()=>{const e=[...P];let a=!1;e.forEach((s,r)=>{if(s.envKey&&{VITE_USE_MOCKS:"false",VITE_API_URL:"http://localhost:4005/api",VITE_API_BASE_URL:"https://psscript.morlocksmaze.com/api",VITE_APP_NAME:"PSScript",VITE_APP_VERSION:"1.0.0",VITE_APP_ENVIRONMENT:"production",VITE_ENABLE_ANALYTICS:"true",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}[s.envKey])e[r]={...s,key:A?"":{VITE_USE_MOCKS:"false",VITE_API_URL:"http://localhost:4005/api",VITE_API_BASE_URL:"https://psscript.morlocksmaze.com/api",VITE_APP_NAME:"PSScript",VITE_APP_VERSION:"1.0.0",VITE_APP_ENVIRONMENT:"production",VITE_ENABLE_ANALYTICS:"true",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}[s.envKey]||"",hasEnvValue:!0},a=!0;else{const t=localStorage.getItem(s.name);t&&(e[r]={...s,key:t},a=!0)}}),a&&x(e)})()},[A]);return a.jsxs("div",{className:"p-6",children:[a.jsx(s,{variant:"h4",component:"h1",gutterBottom:!0,children:"API Settings"}),a.jsx(s,{variant:"body1",paragraph:!0,children:"Manage your API keys for external services. These keys are used by the application to access external APIs."}),a.jsxs(r,{sx:{mb:3},children:[a.jsx(t,{control:a.jsx(n,{checked:A,onChange:e=>{u(e.target.checked)},color:"primary"}),label:"Use environment variables when available"}),a.jsx(s,{variant:"body2",color:"text.secondary",children:"When enabled, the application will prioritize API keys set in environment variables over manual entries"})]}),a.jsx(o,{sx:{mb:4}}),y&&a.jsx(l,{severity:y.includes("Error")?"error":"success",sx:{mb:3},children:y}),a.jsx("div",{className:"grid grid-cols-1 gap-4",children:P.map((e,t)=>a.jsx(i,{variant:"outlined",sx:{mb:2},children:a.jsx(c,{children:a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx(s,{variant:"h6",component:"h2",children:e.name.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),e.hasEnvValue&&a.jsx(l,{severity:"success",icon:!1,sx:{py:0,px:1},children:"Environment Variable Set"})]}),a.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),a.jsx(p,{type:"password",value:e.key,onChange:e=>((e,a)=>{const s=[...P];s[e]={...s[e],key:a},x(s)})(t,e.target.value),placeholder:e.hasEnvValue&&A?"Using environment variable (leave blank to use it)":e.placeholder,fullWidth:!0,margin:"normal",variant:"outlined",InputProps:{readOnly:e.hasEnvValue&&A},helperText:e.hasEnvValue&&A?"This key is set in environment variables and will be used automatically":`Enter your ${e.name.replace(/_/g," ")} here`}),a.jsx(r,{sx:{mt:1},children:a.jsxs(h,{href:e.url,target:"_blank",rel:"noopener",children:["Get ",e.name.replace(/_/g," ")," from provider"]})})]})})},e.name))}),a.jsx(r,{sx:{mt:4,display:"flex",justifyContent:"flex-end"},children:a.jsx(E,{variant:"contained",color:"primary",onClick:()=>{I(!0),v("");try{P.forEach(e=>{e.key?localStorage.setItem(e.name,e.key):localStorage.removeItem(e.name)}),v("API keys saved successfully"),setTimeout(()=>v(""),3e3)}catch(e){console.error("Error saving API keys:",e),v("Error saving API keys")}finally{I(!1)}},disabled:m||P.every(e=>!e.key||e.hasEnvValue&&A),startIcon:m?a.jsx(d,{size:20}):null,children:m?"Saving...":"Save API Keys"})})]})};export{m as default};
