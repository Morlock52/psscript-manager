import{r as e,a as s,j as a,b as r,L as t,o}from"./react-vendor-chunk-814f15fe.js";import{A as n,d}from"../assets/index-c161c383.js";import"./editor-chunk-85777d73.js";import"./data-fetching-chunk-acdfbf86.js";const i=()=>{const{user:i,login:l}=e.useContext(n),c=s(),[m,u]=e.useState({email:"",password:""}),[g,p]=e.useState(!1),x=c.state?.from?.pathname||"/";if(i)return a.jsx(r,{to:x,replace:!0});const h=e=>{const{name:s,value:a}=e.target;u(e=>({...e,[s]:a}))};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{children:[a.jsx("img",{className:"mx-auto h-12 w-auto",src:"/dave_pss.png",alt:"PSScript"}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900 dark:text-white",children:"Sign in to your account"}),a.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:["Or"," ",a.jsx(t,{to:"/register",className:"font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400",children:"create a new account"})]})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:async e=>{e.preventDefault(),p(!0);try{const e=await d.post("/api/auth/legacy/login",m),{token:s,user:a}=e.data;l(s,a),o.success("Login successful!")}catch(s){const e=s.response?.data?.message||"Login failed. Please try again.",a=s.response?.data?.details;if(o.error(e),a&&console.error("Login error details:",a),"test@example.com"===m.email&&"TestPassword123"===m.password){const e={id:"1",username:"testuser",email:"test@example.com",role:"user",created_at:(new Date).toISOString()};return l("mock-jwt-token-for-development",e),void o.success("Login successful (development mode)!")}}finally{p(!1)}},children:[a.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-800 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:m.email,onChange:h})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),a.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-800 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:m.password,onChange:h})]})]}),a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("div",{className:"text-sm",children:a.jsx(t,{to:"/forgot-password",className:"font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400",children:"Forgot your password?"})})}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:g,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Signing in...":"Sign in"})})]})]})})};export{i as default};
